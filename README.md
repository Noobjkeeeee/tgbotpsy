# МойДиалог — Telegram-бот для консультаций с психологами

---

## Описание проекта

**МойДиалог** — Telegram-бот, позволяющий пользователям задавать анонимные вопросы психологам, а также оформлять бесплатные и платные видеоконсультации. Администраторы получают уведомления о новых заявках и могут принимать или отклонять их с комментариями, а пользователи получают своевременную обратную связь.

Функционал бота:
- Приём и модерация анонимных вопросов к психологам.
- Запросы на бесплатные видеоконсультации с согласиями на обработку персональных данных.
- Запросы на платные видеоконсультации с подтверждением согласия на платные услуги.
- Управление заявками через админ-панель с кнопками "Принять" и "Отклонить" и указанием причины отказа.
- Отправка уведомлений как администраторам, так и пользователям.
- Использование FSM (конечных автоматов состояний) для плавного пользовательского взаимодействия.

Проект построен с использованием **aiogram 3.x**, **PostgreSQL**, **SQLAlchemy** и соблюдает требования российского законодательства по обработке персональных данных (ФЗ-152).

---

## Установка и запуск

### Требования

- Python 3.10+
- SQLite
- Telegram Bot API токен
- Фреймворк aiogram 3.x и зависимости из `requirements.txt`

### Шаги установки

1. Клонировать репозиторий:

    ```
    git clone <репозиторий>
    cd <проект>
    ```

2. Создать виртуальное окружение и установить зависимости:

    ```
    python -m venv .venv
    source .venv/bin/activate  # Linux/macOS
    .venv\Scripts\activate  # Windows
    pip install -r requirements.txt
    ```


3. Запустить бота:

    ```
    python -m bot.main
    ```

---

## Структура проекта

- `bot/`
  - `main.py` — основной файл запуска
  - `handlers/` — обработчики сообщений и состояний (free_consult.py, paid_consult.py, question.py)
  - `database.py` — модели SQLAlchemy и настройки БД
  - `states.py` — описание конечных автоматов состояний FSM
  - `config.py` — конфигурация и чтение переменных окружения
  - `logger.py` — настройка логирования
  - `utils.py` — утилиты (валидация, вспомогательные функции)
  - `admin.py` — для админских обработчиков (принятие/отклонение заявок, управление ими)
  - `keyboards.py` — для инлайн и обычных клавиатур
  - `storage.py` — для настройки хранилища состояний
- `requirements.txt` — зависимости
- `README.md` — документация по проекту

---

## Используемые технологии

- aiogram 3.x — асинхронный фреймворк для Telegram-ботов на Python
- Sqlite — база данных
- SQLAlchemy — ORM для работы с базой данных
- Python 3.10+

---

## Ключевые особенности и сценарии

### Пользовательские сценарии

- Задать анонимный вопрос психологу
- Запросить бесплатную видеоконсультацию с подтверждением политики личных данных
- Запросить платную видеоконсультацию с подтверждением согласия на оказание платных услуг


### Администрирование

- Получение уведомлений о новых заявках
- Принятие или отклонение заявки через кнопки в интерфейсе бота
- Отправка пользователю уведомлений о статусе заявки и причинах отклонения
- Логирование активности администраторов

---

## Логирование

Проект настроен на логирование ключевых действий и ошибок с разделением логов для удобного мониторинга и отладки.

---
